// @ts-ignore
import React, { useState } from 'react';
// @ts-ignore
import { View, Text, Switch, Button, Alert } from 'react-native';

const BACKEND_URL = 'https://nnit-ai-freelance-backend-production.up.railway.app'; // Change to your backend

export default function AutomationToggle() {
    const [autoScrape, setAutoScrape] = useState(false);
    const [autoApply, setAutoApply] = useState(false);

    const updateAutomation = async () => {
        try {
            const res = await fetch(`${BACKEND_URL}/api/settings`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ autoScrape, autoApply }),
            });
            if (res.ok) {
                Alert.alert('Success', 'Automation settings updated!');
            } else {
                Alert.alert('Error', 'Failed to update settings');
            }
        } catch (e) {
            let message = 'Unknown error';
            if (e instanceof Error) {
                message = e.message;
            }
            Alert.alert('Error', message);
        }
    };

    return (
        React.createElement(View, { style: { padding: 20 } },
            React.createElement(Text, null, 'Auto Scrape'),
            React.createElement(Switch, { value: autoScrape, onValueChange: setAutoScrape }),
            React.createElement(Text, null, 'Auto Apply'),
            React.createElement(Switch, { value: autoApply, onValueChange: setAutoApply }),
            React.createElement(Button, { title: 'Save', onPress: updateAutomation })
        )
    );
}